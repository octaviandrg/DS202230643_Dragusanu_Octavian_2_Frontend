{"ast":null,"code":"'use strict';\n\nvar Lib = require('../../lib');\n\nvar Template = require('../../plot_api/plot_template');\n\nvar handleTickValueDefaults = require('../../plots/cartesian/tick_value_defaults');\n\nvar handleTickMarkDefaults = require('../../plots/cartesian/tick_mark_defaults');\n\nvar handleTickLabelDefaults = require('../../plots/cartesian/tick_label_defaults');\n\nvar handlePrefixSuffixDefaults = require('../../plots/cartesian/prefix_suffix_defaults');\n\nvar attributes = require('./attributes');\n\nmodule.exports = function colorbarDefaults(containerIn, containerOut, layout) {\n  var colorbarOut = Template.newContainer(containerOut, 'colorbar');\n  var colorbarIn = containerIn.colorbar || {};\n\n  function coerce(attr, dflt) {\n    return Lib.coerce(colorbarIn, colorbarOut, attributes, attr, dflt);\n  }\n\n  var margin = layout.margin || {\n    t: 0,\n    b: 0,\n    l: 0,\n    r: 0\n  };\n  var w = layout.width - margin.l - margin.r;\n  var h = layout.height - margin.t - margin.b;\n  var orientation = coerce('orientation');\n  var isVertical = orientation === 'v';\n  var thicknessmode = coerce('thicknessmode');\n  coerce('thickness', thicknessmode === 'fraction' ? 30 / (isVertical ? w : h) : 30);\n  var lenmode = coerce('lenmode');\n  coerce('len', lenmode === 'fraction' ? 1 : isVertical ? h : w);\n  coerce('x', isVertical ? 1.02 : 0.5);\n  coerce('xanchor', isVertical ? 'left' : 'center');\n  coerce('xpad');\n  coerce('y', isVertical ? 0.5 : 1.02);\n  coerce('yanchor', isVertical ? 'middle' : 'bottom');\n  coerce('ypad');\n  Lib.noneOrAll(colorbarIn, colorbarOut, ['x', 'y']);\n  coerce('outlinecolor');\n  coerce('outlinewidth');\n  coerce('bordercolor');\n  coerce('borderwidth');\n  coerce('bgcolor');\n  var ticklabelposition = Lib.coerce(colorbarIn, colorbarOut, {\n    ticklabelposition: {\n      valType: 'enumerated',\n      dflt: 'outside',\n      values: isVertical ? ['outside', 'inside', 'outside top', 'inside top', 'outside bottom', 'inside bottom'] : ['outside', 'inside', 'outside left', 'inside left', 'outside right', 'inside right']\n    }\n  }, 'ticklabelposition');\n  coerce('ticklabeloverflow', ticklabelposition.indexOf('inside') !== -1 ? 'hide past domain' : 'hide past div');\n  handleTickValueDefaults(colorbarIn, colorbarOut, coerce, 'linear');\n  var font = layout.font;\n  var opts = {\n    outerTicks: false,\n    font: font\n  };\n\n  if (ticklabelposition.indexOf('inside') !== -1) {\n    opts.bgColor = 'black'; // could we instead use the average of colors in the scale?\n  }\n\n  handlePrefixSuffixDefaults(colorbarIn, colorbarOut, coerce, 'linear', opts);\n  handleTickLabelDefaults(colorbarIn, colorbarOut, coerce, 'linear', opts);\n  handleTickMarkDefaults(colorbarIn, colorbarOut, coerce, 'linear', opts);\n  coerce('title.text', layout._dfltTitle.colorbar);\n  var tickFont = colorbarOut.tickfont;\n  var dfltTitleFont = Lib.extendFlat({}, tickFont, {\n    color: font.color,\n    size: Lib.bigFont(tickFont.size)\n  });\n  Lib.coerceFont(coerce, 'title.font', dfltTitleFont);\n  coerce('title.side', isVertical ? 'top' : 'right');\n};","map":null,"metadata":{},"sourceType":"script"}