{"ast":null,"code":"'use strict';\n\nvar isNumeric = require('fast-isnumeric'); // used in the drawing step for 'scatter' and 'scattegeo' and\n// in the convert step for 'scatter3d'\n\n\nmodule.exports = function makeBubbleSizeFn(trace, factor) {\n  if (!factor) {\n    factor = 2;\n  }\n\n  var marker = trace.marker;\n  var sizeRef = marker.sizeref || 1;\n  var sizeMin = marker.sizemin || 0; // for bubble charts, allow scaling the provided value linearly\n  // and by area or diameter.\n  // Note this only applies to the array-value sizes\n\n  var baseFn = marker.sizemode === 'area' ? function (v) {\n    return Math.sqrt(v / sizeRef);\n  } : function (v) {\n    return v / sizeRef;\n  }; // TODO add support for position/negative bubbles?\n  // TODO add 'sizeoffset' attribute?\n\n  return function (v) {\n    var baseSize = baseFn(v / factor); // don't show non-numeric and negative sizes\n\n    return isNumeric(baseSize) && baseSize > 0 ? Math.max(baseSize, sizeMin) : 0;\n  };\n};","map":null,"metadata":{},"sourceType":"script"}