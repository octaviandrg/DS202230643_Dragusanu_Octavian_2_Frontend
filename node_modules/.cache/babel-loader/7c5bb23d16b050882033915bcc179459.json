{"ast":null,"code":"'use strict';\n\nvar isNumeric = require('fast-isnumeric');\n\nvar isArrayOrTypedArray = require('../../lib').isArrayOrTypedArray;\n\nvar BADNUM = require('../../constants/numerical').BADNUM;\n\nvar colorscaleCalc = require('../../components/colorscale/calc');\n\nvar _ = require('../../lib')._;\n\nmodule.exports = function calc(gd, trace) {\n  var len = trace._length;\n  var calcTrace = new Array(len);\n  var z = trace.z;\n  var hasZ = isArrayOrTypedArray(z) && z.length;\n\n  for (var i = 0; i < len; i++) {\n    var cdi = calcTrace[i] = {};\n    var lon = trace.lon[i];\n    var lat = trace.lat[i];\n    cdi.lonlat = isNumeric(lon) && isNumeric(lat) ? [+lon, +lat] : [BADNUM, BADNUM];\n\n    if (hasZ) {\n      var zi = z[i];\n      cdi.z = isNumeric(zi) ? zi : BADNUM;\n    }\n  }\n\n  colorscaleCalc(gd, trace, {\n    vals: hasZ ? z : [0, 1],\n    containerStr: '',\n    cLetter: 'z'\n  });\n\n  if (len) {\n    calcTrace[0].t = {\n      labels: {\n        lat: _(gd, 'lat:') + ' ',\n        lon: _(gd, 'lon:') + ' '\n      }\n    };\n  }\n\n  return calcTrace;\n};","map":null,"metadata":{},"sourceType":"script"}