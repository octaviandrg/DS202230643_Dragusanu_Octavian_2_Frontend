{"ast":null,"code":"'use strict';\n\nvar colorMix = require('tinycolor2').mix;\n\nvar colorAttrs = require('../../components/color/attributes');\n\nvar Lib = require('../../lib');\n/**\n * @param {object} opts :\n *   - dfltColor {string} : default axis color\n *   - bgColor {string} : combined subplot bg color\n *   - blend {number, optional} : blend percentage (to compute dflt grid color)\n *   - showLine {boolean} : show line by default\n *   - showGrid {boolean} : show grid by default\n *   - noZeroLine {boolean} : don't coerce zeroline* attributes\n *   - attributes {object} : attribute object associated with input containers\n */\n\n\nmodule.exports = function handleLineGridDefaults(containerIn, containerOut, coerce, opts) {\n  opts = opts || {};\n  var dfltColor = opts.dfltColor;\n\n  function coerce2(attr, dflt) {\n    return Lib.coerce2(containerIn, containerOut, opts.attributes, attr, dflt);\n  }\n\n  var lineColor = coerce2('linecolor', dfltColor);\n  var lineWidth = coerce2('linewidth');\n  var showLine = coerce('showline', opts.showLine || !!lineColor || !!lineWidth);\n\n  if (!showLine) {\n    delete containerOut.linecolor;\n    delete containerOut.linewidth;\n  }\n\n  var gridColorDflt = colorMix(dfltColor, opts.bgColor, opts.blend || colorAttrs.lightFraction).toRgbString();\n  var gridColor = coerce2('gridcolor', gridColorDflt);\n  var gridWidth = coerce2('gridwidth');\n  var gridDash = coerce2('griddash');\n  var showGridLines = coerce('showgrid', opts.showGrid || !!gridColor || !!gridWidth || !!gridDash);\n\n  if (!showGridLines) {\n    delete containerOut.gridcolor;\n    delete containerOut.gridwidth;\n    delete containerOut.griddash;\n  }\n\n  if (opts.hasMinor) {\n    var minorGridColorDflt = colorMix(containerOut.gridcolor, opts.bgColor, 67).toRgbString();\n    var minorGridColor = coerce2('minor.gridcolor', minorGridColorDflt);\n    var minorGridWidth = coerce2('minor.gridwidth', containerOut.gridwidth || 1);\n    var minorGridDash = coerce2('minor.griddash', containerOut.griddash || 'solid');\n    var minorShowGridLines = coerce('minor.showgrid', !!minorGridColor || !!minorGridWidth || !!minorGridDash);\n\n    if (!minorShowGridLines) {\n      delete containerOut.minor.gridcolor;\n      delete containerOut.minor.gridwidth;\n      delete containerOut.minor.griddash;\n    }\n  }\n\n  if (!opts.noZeroLine) {\n    var zeroLineColor = coerce2('zerolinecolor', dfltColor);\n    var zeroLineWidth = coerce2('zerolinewidth');\n    var showZeroLine = coerce('zeroline', opts.showGrid || !!zeroLineColor || !!zeroLineWidth);\n\n    if (!showZeroLine) {\n      delete containerOut.zerolinecolor;\n      delete containerOut.zerolinewidth;\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"script"}