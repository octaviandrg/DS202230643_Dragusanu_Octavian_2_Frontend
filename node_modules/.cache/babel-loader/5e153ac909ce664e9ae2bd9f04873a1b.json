{"ast":null,"code":"'use strict';\n\nvar Lib = require('../../lib');\n\nvar Axes = require('../../plots/cartesian/axes');\n\nvar alignPeriod = require('../../plots/cartesian/align_period');\n\nvar calcCommon = require('../ohlc/calc').calcCommon;\n\nmodule.exports = function (gd, trace) {\n  var fullLayout = gd._fullLayout;\n  var xa = Axes.getFromId(gd, trace.xaxis);\n  var ya = Axes.getFromId(gd, trace.yaxis);\n  var origX = xa.makeCalcdata(trace, 'x');\n  var x = alignPeriod(trace, xa, 'x', origX).vals;\n  var cd = calcCommon(gd, trace, origX, x, ya, ptFunc);\n\n  if (cd.length) {\n    Lib.extendFlat(cd[0].t, {\n      num: fullLayout._numBoxes,\n      dPos: Lib.distinctVals(x).minDiff / 2,\n      posLetter: 'x',\n      valLetter: 'y'\n    });\n    fullLayout._numBoxes++;\n    return cd;\n  } else {\n    return [{\n      t: {\n        empty: true\n      }\n    }];\n  }\n};\n\nfunction ptFunc(o, h, l, c) {\n  return {\n    min: l,\n    q1: Math.min(o, c),\n    med: c,\n    q3: Math.max(o, c),\n    max: h\n  };\n}","map":null,"metadata":{},"sourceType":"script"}