{"ast":null,"code":"'use strict';\n\nvar isNumeric = require('fast-isnumeric');\n\nvar BADNUM = require('../../constants/numerical').BADNUM;\n\nvar calcColorscale = require('../scatter/colorscale_calc');\n\nvar arraysToCalcdata = require('../scatter/arrays_to_calcdata');\n\nvar calcSelection = require('../scatter/calc_selection');\n\nvar calcMarkerSize = require('../scatter/calc').calcMarkerSize;\n\nmodule.exports = function calc(gd, trace) {\n  var fullLayout = gd._fullLayout;\n  var subplotId = trace.subplot;\n  var realAxis = fullLayout[subplotId].realaxis;\n  var imaginaryAxis = fullLayout[subplotId].imaginaryaxis;\n  var realArray = realAxis.makeCalcdata(trace, 'real');\n  var imagArray = imaginaryAxis.makeCalcdata(trace, 'imag');\n  var len = trace._length;\n  var cd = new Array(len);\n\n  for (var i = 0; i < len; i++) {\n    var real = realArray[i];\n    var imag = imagArray[i];\n    var cdi = cd[i] = {};\n\n    if (isNumeric(real) && isNumeric(imag)) {\n      cdi.real = real;\n      cdi.imag = imag;\n    } else {\n      cdi.real = BADNUM;\n    }\n  }\n\n  calcMarkerSize(trace, len);\n  calcColorscale(gd, trace);\n  arraysToCalcdata(cd, trace);\n  calcSelection(cd, trace);\n  return cd;\n};","map":null,"metadata":{},"sourceType":"script"}