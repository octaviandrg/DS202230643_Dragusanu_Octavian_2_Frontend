{"ast":null,"code":"'use strict';\n\nvar isNumeric = require('fast-isnumeric');\n\nvar isMobileOrTablet = require('is-mobile');\n\nmodule.exports = function preserveDrawingBuffer(opts) {\n  var ua;\n\n  if (opts && opts.hasOwnProperty('userAgent')) {\n    ua = opts.userAgent;\n  } else {\n    ua = getUserAgent();\n  }\n\n  if (typeof ua !== 'string') return true;\n  var enable = isMobileOrTablet({\n    ua: {\n      headers: {\n        'user-agent': ua\n      }\n    },\n    tablet: true,\n    featureDetect: false\n  });\n\n  if (!enable) {\n    var allParts = ua.split(' ');\n\n    for (var i = 1; i < allParts.length; i++) {\n      var part = allParts[i];\n\n      if (part.indexOf('Safari') !== -1) {\n        // find Safari version\n        for (var k = i - 1; k > -1; k--) {\n          var prevPart = allParts[k];\n\n          if (prevPart.substr(0, 8) === 'Version/') {\n            var v = prevPart.substr(8).split('.')[0];\n            if (isNumeric(v)) v = +v;\n            if (v >= 13) return true;\n          }\n        }\n      }\n    }\n  }\n\n  return enable;\n};\n\nfunction getUserAgent() {\n  // similar to https://github.com/juliangruber/is-mobile/blob/91ca39ccdd4cfc5edfb5391e2515b923a730fbea/index.js#L14-L17\n  var ua;\n\n  if (typeof navigator !== 'undefined') {\n    ua = navigator.userAgent;\n  }\n\n  if (ua && ua.headers && typeof ua.headers['user-agent'] === 'string') {\n    ua = ua.headers['user-agent'];\n  }\n\n  return ua;\n}","map":null,"metadata":{},"sourceType":"script"}